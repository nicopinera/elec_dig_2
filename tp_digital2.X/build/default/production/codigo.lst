MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001     LIST        p=16f887
                      00002     #INCLUDE    <p16f887.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Jan 06 2020
                      00005 ;  MPASM PIC16F887 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2020 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00810         LIST
                      00003     
                      00004 ;-------------------------------
                      00005 ; Variables externas
                      00006 ;-------------------------------
                      00007 ; Nos indica si estamos esperando un numero y si se ingreso el primer digito
                      00008 ; B0 = 1 = Esperando - B0 = 0 = No Esperando
                      00009 ; B1 = 0 = No se ingreso el primer digito - B1 = 1 = Se ingreso el primer digito
  00000020            00010 INGRESAR    EQU 0X20
                      00011 
                      00012 ; Temperatura de Referencia
  00000021            00013 TEMPREF     EQU 0X21
                      00014 
                      00015 ; Indice de tecla pulsada (0-15)
  00000022            00016 INDICE      EQU 0X22
                      00017 
                      00018 ; En que columna estoy (1-4)
  00000023            00019 COL         EQU 0X23
                      00020 
                      00021 ; Mascara de columna
  00000024            00022 COLMASK     EQU 0X24    
                      00023 
                      00024 ; Banderas
                      00025 ; B0: Bandera de 1 segundo - Si =1 comienza la conversion en ADC - Si =0 no compienza la conversion - Ba
                            ndera activada por TMR1 cada 1 segundo (FLAG_1SEG)
                      00026 ; B1: Bandera del ADC - Si = 1 el ADC finalizo - Si = 0 el ADC no termino (FLAG_ADC_OK)
                      00027 ; B2: Bandera para Tramistir - Si = 1 Hay que enviar la info por EUSART - Si = 0 no hay que inviar (FLAG
                            _TX)
                      00028 ; B3: Display que se prende - 0 = Display 2 (UNIDAD - RB2) - 1 = Display 1 (DECENA - RB1)
  00000025            00029 FLAG        EQU 0X25
                      00030             
                      00031 ; Displays
                      00032 
                      00033 ; Unidad
  00000026            00034 DIGITO_0    EQU 0X26
                      00035 
                      00036 ; Decena
  00000027            00037 DIGITO_1    EQU 0X27        
                      00038 
                      00039 ; Contador delay
  00000029            00040 CONT0 EQU 0X29       
  0000002A            00041 CONT1 EQU 0X2A 
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000002B            00042 DIG1 EQU 0X2B        ; Primer dígito temporal
  0000002C            00043 WREG_TEMP EQU 0X2C   ; Variable temporal para cálculos
  0000002D            00044 WREG_TEMP2 EQU 0X2D  ; Variable temporal para cálulos
  0000002E            00045 TEMPACTUAL EQU 0X2E  ;Temperatura actual
                      00046 
                      00047 ; Para guardar contexto
  00000070            00048 WTEMP   EQU 0X70
  00000071            00049 STATUST EQU 0X71
                      00050 ; --------------------------------------------
                      00051     ORG     0X0
0000   2???           00052     GOTO    MAIN    ; El programa comienza en la direccion 0 y salta a la rutina principal MAIN.
                      00053 ; --------------------------------------------
                      00054     ORG     0X04
0004   2???           00055     GOTO    ISR     ; Si ocurre una interrupcion, el programa salta a la rutina ISR.
                      00056 ; --------------------------------------------
                      00057     ORG 0X05
0005                  00058 MAIN:
0005   01A0           00059     CLRF        INGRESAR    ; -- Limpieza de Banderas
0006   01A1           00060     CLRF        TEMPREF
0007   01A5           00061     CLRF        FLAG
0008   01A6           00062     CLRF        DIGITO_0        
0009   01A7           00063     CLRF        DIGITO_1     
                      00064 
000A   1683 1303      00065     BANKSEL     TRISD       ; -- Configuracion de Puertos
000C   30F0           00066     MOVLW       B'11110000' ; RD7-RD4 Entradas (filas), RD3-RD0 Filas (columnas)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000D   0088           00067     MOVWF       TRISD
000E   3001           00068     MOVLW       B'00000001' ; Configura el puerto B: RBO para el pulsador y RB1 -RB2 los habilitadores d
                            el display.
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000F   0086           00069     MOVWF       TRISB
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0010   1409           00070     BSF         TRISE,RE0   ; Configura el puerto E: RE0 como entrada analogica para el sensor y RE1 com
                            o salida para el LED.
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0011   1089           00071     BCF         TRISE,RE1   
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0012   0185           00072     CLRF        TRISA       ; Configura el puerto A como salida para enviar datos al display.
0013   1283 1303      00073     BANKSEL     PORTA
0015   0188           00074     CLRF        PORTD        ; Asegura que columnas inician en 0
0016   0186           00075     CLRF        PORTB
0017   0189           00076     CLRF        PORTE
0018   0185           00077     CLRF        PORTA
0019   1683 1703      00078     BANKSEL     ANSELH      ; Configura RB0 como entrada digital (no analógica).
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001B   1209           00079     BCF         ANSELH,ANS12
                      00080     
001C   1683 1303      00081     BANKSEL     OSCCON      ; -- Configura el oscilador interno del microcontrolador a 2 MHz.
001E   3058           00082     MOVLW       B'01011000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001F   008F           00083     MOVWF       OSCCON      
                      00084     
0020   1283 1303      00085     BANKSEL     ADCON0      ; -- Configuracion del ADC
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0022   3015           00086     MOVLW       B'00010101' ; Canal AN5 (RE0), ADC habilitado pero no convirtiendo 
0023   009F           00087     MOVWF       ADCON0      ; Frecuencia = Fosc/2 = 1[MHz]
0024   019E           00088     CLRF        ADRESH      ; Limpio registro donde se guarda la conversion
0025   1683 1303      00089     BANKSEL     ADCON1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0027   019F           00090     CLRF        ADCON1      ; Justificado a la izquierda, Vref = VDD-VSS
                      00091     
0028   1683 1303      00092     BANKSEL     TXSTA       ; -- Configuracion de la Tx
002A   3024           00093     MOVLW       B'00100100' ; TXEN=1, BRGH=1 (alta velocidad)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002B   0098           00094     MOVWF       TXSTA
002C   1283 1303      00095     BANKSEL     RCSTA
002E   3080           00096     MOVLW       B'10000000' ; SPEN=1 habilita transmisor
002F   0098           00097     MOVWF       RCSTA
0030   1683 1303      00098     BANKSEL     SPBRG
0032   300C           00099     MOVLW       .12         ; Baud Rate 9600 con Fosc = 2MHz (BRGH=1): SPBRG=12
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0033   0099           00100     MOVWF       SPBRG
                      00101     
0034   1283 1303      00102     BANKSEL     T1CON       ; -- Timer 1
0036   018E           00103     CLRF        TMR1L
0037   018F           00104     CLRF        TMR1H
0038   3030           00105     MOVLW       B'00110000'
0039   0090           00106     MOVWF       T1CON            ; Inicializa el temporizador TMR1 y lo configura.
                      00107     
003A   1283 1303      00108     BANKSEL     INTCON              ; -- Configuracion de Interrupciones y TMR0
003C   30F0           00109     MOVLW       B'11110000'     ; Habilito GIE - PEIE - T0IE- INTE y limpio bandera INTF
003D   008B           00110     MOVWF       INTCON 
003E   018C           00111     CLRF        PIR1                ; Limpio banderas de ADC - Tx - TRM1iF
003F   1683 1303      00112     BANKSEL     OPTION_REG
0041   3094           00113     MOVLW       B'10010100'         ; Flanco de bajada para INT - Frecuencia interna para TMR0 - Prescal
                            er para TMR0 - 1:32
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0042   0081           00114     MOVWF       OPTION_REG      
0043   1683 1303      00115     BANKSEL     PIE1            
0045   3041           00116     MOVLW       B'01000001'     ; Habilito interrupciones por ADC - TMR1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0046   008C           00117     MOVWF       PIE1            
                      00118 
                      00119     ;Activo TMR1
0047   1283 1303      00120     BANKSEL     T1CON
0049   1410           00121     BSF         T1CON,0             
                      00122 ; --------------------------------------------
004A                  00123 MAIN_LOOP:                      ; -- Loop Principal
004A   1820           00124     BTFSC       INGRESAR,0          ; Si está esperando ingreso de número
004B   2???           00125     CALL        TECLADO             ; Llama a la rutina de teclado
004C   1820           00126     BTFSC       INGRESAR,0      ; Si sigue esperando ingreso, no hace nada más
004D   2???           00127     GOTO        MAIN_LOOP
                      00128                 ;FLAG,0    
004E   1825           00129     BTFSC           FLAG,0              ; Si pasó 1 segundo, inicio conversión ADC
004F   2???           00130     GOTO        INICIAR_ADC         ; Si no pasó 1 segundo, sigue
                      00131 
                      00132     ; Comparación de temperatura actual con la temperatura de referencia para prender el led
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0050   0821           00133     MOVF        TEMPREF,W
0051   022E           00134     SUBWF       TEMPACTUAL,W
0052   1803           00135     BTFSC       STATUS,C            ; Si TEMPACTUAL >= TEMPREF
0053   1489           00136     BSF         PORTE,RE1           ; Enciende LED
0054   1C03           00137     BTFSS       STATUS,C
0055   1089           00138     BCF         PORTE,RE1
0056   2???           00139     GOTO        MAIN_LOOP
                      00140 
0057                  00141 INICIAR_ADC:
0057   1025           00142     BCF             FLAG,0
0058   1283 1303      00143     BANKSEL         ADCON0
005A   149F           00144     BSF             ADCON0, GO     ; Iniciar conversión del ADC
005B   141F           00145     BSF             ADCON0, ADON
005C   2???           00146     GOTO        MAIN_LOOP
                      00147 ; --------------------------------------------
005D                  00148 TECLADO:                    ; Subrutina de Teclado
005D   1283 1303      00149     BANKSEL     PORTD
005F   300E           00150     MOVLW       0x0E        ; RD3-RD1 en 1 (columnas), RD7-RD4 entradas (filas)
0060   0488           00151     IORWF       PORTD, F    ; Asegura columnas en 1
0061   0808           00152     MOVF        PORTD, W    ; Lee filas
0062   39F0           00153     ANDLW       0xF0        ; Enmascara filas
0063   1903           00154     BTFSC       STATUS, Z
0064   2???           00155     GOTO        TECLADO     ; No hay teclas presionadas
0065   2???           00156     CALL        RETARDO_20ms
0066   0808           00157     MOVF        PORTD, W
0067   39F0           00158     ANDLW       0xF0
0068   1903           00159     BTFSC       STATUS, Z
0069   2???           00160     GOTO        TECLADO     ; No hay teclas presionadas
006A   2???           00161     CALL        ESCANEAR_TECLAS
006B   0822           00162     MOVF        INDICE, W
006C   3C0B           00163     SUBLW       0x0B        ; Solo índices 0-11 válidos
006D   1C03           00164     BTFSS       STATUS, C
006E   0008           00165     RETURN                  ; No válido
006F   0822           00166     MOVF        INDICE, W
0070   2???           00167     CALL        TECLAS
0071   00AC           00168     MOVWF       WREG_TEMP
0072   082C           00169     MOVF        WREG_TEMP, W
0073   3AFF           00170     XORLW       0xFF
0074   1903           00171     BTFSC       STATUS, Z
0075   0008           00172     RETURN      ; Si es 0xFF, no hacer nada
0076   1CA0           00173     BTFSS       INGRESAR, 1
0077   2???           00174     GOTO        TECLADO_PRIMER_DIGITO
0078   2???           00175     CALL        TECLADO_SEGUNDO_DIGITO
0079   0008           00176     RETURN
                      00177 
007A                  00178 TECLADO_SEGUNDO_DIGITO:
007A   082B           00179     MOVF    DIG1, W
007B   00A1           00180     MOVWF   TEMPREF
007C   082B           00181     MOVF    DIG1, W
007D   0D2C           00182     RLF     WREG_TEMP, W
007E   07A1           00183     ADDWF   TEMPREF, F
007F   0821           00184     MOVF    TEMPREF, W
0080   0D2C           00185     RLF     WREG_TEMP, W
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0081   07A1           00186     ADDWF   TEMPREF, F
0082   082B           00187     MOVF    DIG1, W
0083   07A1           00188     ADDWF   TEMPREF, F
0084   082C           00189     MOVF    WREG_TEMP, W
0085   07A1           00190     ADDWF   TEMPREF, F
0086   2???           00191     CALL    ACTUALIZAR_DISPLAY
0087   1020           00192     BCF     INGRESAR, 0
0088   10A0           00193     BCF     INGRESAR, 1
0089   0008           00194     RETURN
                      00195 
008A                  00196 TECLADO_PRIMER_DIGITO:
008A   082C           00197     MOVF    WREG_TEMP, W
008B   00AB           00198     MOVWF   DIG1
008C   14A0           00199     BSF     INGRESAR, 1
008D   2???           00200     GOTO    TECLADO
                      00201 
008E                  00202 ESCANEAR_TECLAS:
008E   01A3           00203     CLRF    COL
008F   3002           00204     MOVLW   0x02            ; RD1 (columna 1)
0090   00A4           00205     MOVWF   COLMASK
0091                  00206 SCAN_COL_LOOP:
0091   300E           00207     MOVLW   0x0E            ; RD3-RD1 en 1
0092   0488           00208     IORWF   PORTD, F
0093   0924           00209     COMF    COLMASK, W      ; Columna activa en 0
0094   390E           00210     ANDLW   0x0E            ; Solo columnas
0095   38F0           00211     IORLW   0xF0            ; Filas en 1
0096   0088           00212     MOVWF   PORTD
0097   0000           00213     NOP
0098   0000           00214     NOP
0099   0808           00215     MOVF    PORTD, W
009A   39F0           00216     ANDLW   0xF0
009B   3AF0           00217     XORLW   0xF0
009C   1903           00218     BTFSC   STATUS, Z
009D   2???           00219     GOTO    NEXT_COL
009E   0808           00220     MOVF    PORTD, W
009F   39F0           00221     ANDLW   0xF0
00A0   3AF0           00222     XORLW   0xF0
00A1   00AC           00223     MOVWF   WREG_TEMP
00A2   01A2           00224     CLRF    INDICE
00A3   3080           00225     MOVLW   0x80            ; RD7 (fila 1)
00A4   00AD           00226     MOVWF   WREG_TEMP2
00A5                  00227 SCAN_ROW_LOOP:
00A5   082C           00228     MOVF    WREG_TEMP, W
00A6   052D           00229     ANDWF   WREG_TEMP2, W
00A7   1D03           00230     BTFSS   STATUS, Z
00A8   2???           00231     GOTO    FOUND_ROW
00A9   0AA2           00232     INCF    INDICE, F
00AA   0CAD           00233     RRF     WREG_TEMP2, F   ; Siguiente fila (RD7->RD6->RD5->RD4)
00AB   082D           00234     MOVF    WREG_TEMP2, W
00AC   1903           00235     BTFSC   STATUS, Z
00AD   2???           00236     GOTO    NEXT_COL
00AE   2???           00237     GOTO    SCAN_ROW_LOOP
00AF                  00238 FOUND_ROW:
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00239     ; INDICE = número de fila (0-3)
                      00240     ; Calcula índice físico: INDICE = fila*3 + (columna-1)
00AF   0822           00241     MOVF    INDICE, W
00B0   00AD           00242     MOVWF   WREG_TEMP2
00B1   0DAD           00243     RLF     WREG_TEMP2, F   ; *2
00B2   0722           00244     ADDWF   INDICE, W       ; W = fila*3 + fila
00B3   0823           00245     MOVF    COL, W
00B4   072D           00246     ADDWF   WREG_TEMP2, W   ; W = fila*3 + columna
00B5   00A2           00247     MOVWF   INDICE
00B6   0008           00248     RETURN
00B7                  00249 NEXT_COL:
00B7   0AA3           00250     INCF    COL, F
00B8   3003           00251     MOVLW   0x03
00B9   0223           00252     SUBWF   COL, W
00BA   1D03           00253     BTFSS   STATUS, Z
00BB   0DA4           00254     RLF     COLMASK, F
00BC   2???           00255     GOTO    SCAN_COL_LOOP
00BD   30FF           00256     MOVLW   0xFF            ; No se detectó tecla
00BE   00A2           00257     MOVWF   INDICE
00BF   0008           00258     RETURN
00C0                  00259 TECLAS:
00C0   0782           00260     ADDWF   PCL, F
00C1   34FF           00261     RETLW   0xFF    ; 0: * (fila 1, col 1)
00C2   3400           00262     RETLW   0x00    ; 1: 0 (fila 1, col 2)
00C3   34FF           00263     RETLW   0xFF    ; 2: # (fila 1, col 3)
00C4   3407           00264     RETLW   0x07    ; 3: 7 (fila 2, col 1)
00C5   3408           00265     RETLW   0x08    ; 4: 8 (fila 2, col 2)
00C6   3409           00266     RETLW   0x09    ; 5: 9 (fila 2, col 3)
00C7   3404           00267     RETLW   0x04    ; 6: 4 (fila 3, col 1)
00C8   3405           00268     RETLW   0x05    ; 7: 5 (fila 3, col 2)
00C9   3406           00269     RETLW   0x06    ; 8: 6 (fila 3, col 3)
00CA   3401           00270     RETLW   0x01    ; 9: 1 (fila 4, col 1)
00CB   3402           00271     RETLW   0x02    ; 10: 2 (fila 4, col 2)
00CC   3403           00272     RETLW   0x03    ; 11: 3 (fila 4, col 3)
                      00273     ; Eliminado el índice 12, ya que solo hay 12 teclas en 4x3
                      00274 
                      00275 ;----------------------------------------------------------
                      00276 ;Subrutina del display
                      00277 ;------------------------------------------------------------------------
00CD                  00278 ACTUALIZAR_DISPLAY:
00CD   082E           00279     MOVF    TEMPACTUAL, W ; o TEMPREF
00CE   00AC           00280     MOVWF   WREG_TEMP
00CF   300A           00281     MOVLW   .10
00D0   00AD           00282     MOVWF   WREG_TEMP2
00D1   01A7           00283     CLRF    DIGITO_1
00D2                  00284 BUCLE_RESTA:
00D2   022C           00285     SUBWF   WREG_TEMP, W
00D3   1C03           00286     BTFSS   STATUS, C
00D4   2???           00287     GOTO    GUARDAR_UNIDAD
00D5   0AA7           00288     INCF    DIGITO_1, F
00D6   082C           00289     MOVF    WREG_TEMP, W
00D7   022D           00290     SUBWF   WREG_TEMP2, W
00D8   00AC           00291     MOVWF   WREG_TEMP
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00D9   2???           00292     GOTO    BUCLE_RESTA
00DA                  00293 GUARDAR_UNIDAD:
00DA   082C           00294     MOVF    WREG_TEMP, W
00DB   00A6           00295     MOVWF   DIGITO_0
00DC   0008           00296     RETURN
                      00297 ; --------------------------------------------
00DD                  00298 RETARDO_20ms:           ; Rutina de retardo aproximado de 20 ms usando bucles anidados.
00DD   300A           00299     MOVLW       .10
00DE   00A9           00300     MOVWF       CONT0
00DF   30FA           00301 L2  MOVLW       .250
00E0   00AA           00302     MOVWF       CONT1
00E1   0000           00303 L1  NOP             
00E2   0BAA           00304     DECFSZ      CONT1, 1
00E3   2???           00305     GOTO        L1
00E4   0BA9           00306     DECFSZ      CONT0,1
00E5   2???           00307     GOTO        L2
00E6   0008           00308     RETURN
                      00309 ;-----------------------------------------------------------------------------
00E7                  00310 TABLA_7SEG: ;Catodo Comun (hgfedcba) h=dp
Warning[202]: Argument out of range.  Least significant bits used.
00E7   0702           00311     ADDWF   PCL,PCL
00E8   343F           00312     RETLW   B'00111111' ; 0 
00E9   3406           00313     RETLW   B'00000110' ; 1 
00EA   345B           00314     RETLW   B'01011011' ; 2 01011011
00EB   344F           00315     RETLW   B'01001111' ; 3 01001111
00EC   3466           00316     RETLW   B'01100110' ; 4 01100110
00ED   346D           00317     RETLW   B'01101101' ; 5 01101101
00EE   347D           00318     RETLW   B'01111101' ; 6 01111101
00EF   3407           00319     RETLW   B'00000111' ; 7 00000111
00F0   347F           00320     RETLW   B'01111111' ; 8 01111111
00F1   346F           00321     RETLW   B'01101111' ; 9 01101111
                      00322 ; --------------------------------------------
00F2                  00323 ISR:                    ; Rutina principal de atención a interrupciones: verifica la fuente y salta a l
                            a rutina correspondiente.
00F2   00F0           00324     MOVWF   WTEMP       ;Guardo el contexto previo a la interrupcion
00F3   0E03           00325     SWAPF   STATUS,W
00F4   00F1           00326     MOVWF   STATUST
00F5   190B           00327     BTFSC   INTCON, T0IF  ;Testeo del Timer0
00F6   2???           00328     GOTO    ISR_TMR0   
00F7   1283 1303      00329     BANKSEL PIR1        ; Testeo de banderas
00F9   188B           00330     BTFSC   INTCON,INTF ; Bandera del Pulsador
00FA   2???           00331     GOTO    ISR_RB0
00FB   180C           00332     BTFSC   PIR1,TMR1IF  ; Bandera del TMR1
00FC   2???           00333     GOTO    ISR_TMR1
00FD   1B0C           00334     BTFSC   PIR1,ADIF   ; Bandera del ADC
00FE   2???           00335     GOTO    ISR_ADC
00FF   1A0C           00336     BTFSC   PIR1,TXIF   ;Bandera de Tx
0100   2???           00337     GOTO    ISR_TRANSMICION 
0101   2???           00338     GOTO    SALIR
                      00339 ; --------------------------------------------
0102                  00340 ISR_TMR0:
0102   110B           00341     BCF     INTCON, T0IF
0103   1086           00342     BCF     PORTB, RB1
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0104   1106           00343     BCF     PORTB, RB2
0105   19A5           00344     BTFSC   FLAG,3
0106   2???           00345     GOTO    MUX_DISPLAY_1
                      00346     ; Mostrar unidad
0107   0826           00347     MOVF    DIGITO_0, W
0108   2???           00348     CALL    TABLA_7SEG
0109   0085           00349     MOVWF   PORTA
010A   1506           00350     BSF     PORTB, RB2
010B   15A5           00351     BSF     FLAG,3
010C   2???           00352     GOTO    SALIR
010D                  00353 MUX_DISPLAY_1:
010D   0827           00354     MOVF    DIGITO_1, W
010E   2???           00355     CALL    TABLA_7SEG
010F   0085           00356     MOVWF   PORTA
0110   1486           00357     BSF     PORTB, RB1
0111   11A5           00358     BCF     FLAG,3
0112   2???           00359     GOTO    SALIR
                      00360 ;----------------------------------------------
0113                  00361 ISR_RB0:     ; Atiende la interrupción por el pulsador en RB0 y conmuta la bandera de ingreso.
0113   108B           00362     BCF     INTCON,INTF
0114   1283 1303      00363     BANKSEL INGRESAR
0116   3001           00364     MOVLW   .1
0117   06A0           00365     XORWF   INGRESAR,F   ;si estaba en 1 pasa a 0, si estaba en 0 pasa a 1
0118   2???           00366     GOTO    SALIR
                      00367 ; --------------------------------------------
0119                  00368 ISR_TMR1:   ; Atiende la interrupción del temporizador 1 y activa la bandera de 1 segundo.
0119   100C           00369     BCF     PIR1,TMR1IF
011A   1683 1303      00370     BANKSEL PIE1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
011C   160C           00371     BSF     PIE1,TXIE   ; Habilito la transmicion luego de 1 segundo
011D   1283 1303      00372     BANKSEL FLAG
011F   3001           00373     MOVLW   B'00000001'
0120   06A5           00374     XORWF   FLAG,F      ;SE COMPLEMENTA LA BANDERA DE 1 SEGUNDO PARA PRENDER EL ADC
0121   2???           00375     GOTO    SALIR
                      00376 ; --------------------------------------------
0122                  00377 ISR_ADC:    ; Atiende la interrupcion del ADC y limpia la bandera correspondiente.
0122   130C           00378     BCF     PIR1,ADIF
0123   1283 1303      00379     BANKSEL ADRESH
0125   081E           00380     MOVF    ADRESH, W           ; Leemos solo ADRESH (justificado a la izquierda)
0126   00AE           00381     MOVWF   TEMPACTUAL          ; Guardamos la temperatura
0127   2???           00382     CALL    ACTUALIZAR_DISPLAY  ; Cada vez que se complete una conversion del ADC se actualizan los disp
                            lays *(REVISAR POR LAS DUDAS)*
0128   14A5           00383     BSF     FLAG,1
0129   2???           00384     GOTO    SALIR
                      00385 ; --------------------------------------------
012A                  00386 ISR_TRANSMICION:    ; Interrumpe cuando el buffer esta limpio
012A   1283 1303      00387     BANKSEL PIR1
012C   120C           00388     BCF     PIR1,TXIF   ;Limpio la bandera
012D   1683 1303      00389     BANKSEL PIE1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
012F   120C           00390     BCF     PIE1,TXIE   ; Deshabilito la interrupcion de transmicion
                      00391 
0130   1283 1303      00392     BANKSEL FLAG        ; (REVISAR)
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0132   1125           00393     BCF     FLAG,2
                      00394 
0133   1283 1303      00395     BANKSEL TEMPACTUAL      ; -- Proceso de Tx
0135   082E           00396     MOVF    TEMPACTUAL,W    
0136   1D03           00397     BTFSS   STATUS,Z        ; SI ESTA VACIO NO ENVIO NADA
0137   0099           00398     MOVWF   TXREG
0138   2???           00399     GOTO    SALIR
                      00400 ; --------------------------------------------
0139                  00401 SALIR:      ; Restaura el contexto y retorna de la interrupción.
0139   0E71           00402     SWAPF   STATUST,W
013A   00F1           00403     MOVWF   STATUST
013B   0EF0           00404     SWAPF   WTEMP,F
013C   0E70           00405     SWAPF   WTEMP,W
013D   0009           00406     RETFIE
                      00407 ; --------------------------------------------
                      00408     END
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 10


SYMBOL TABLE
  LABEL                             VALUE 

ABDEN                             00000000
ABDOVF                            00000007
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACTUALIZAR_DISPLAY                000000CD
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
ANS0                              00000000
ANS1                              00000001
ANS10                             00000002
ANS11                             00000003
ANS12                             00000004
ANS13                             00000005
ANS2                              00000002
ANS3                              00000003
ANS4                              00000004
ANS5                              00000005
ANS6                              00000006
ANS7                              00000007
ANS8                              00000000
ANS9                              00000001
ANSEL                             00000188
ANSELH                            00000189
BAUDCTL                           00000187
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRG0                              00000000
BRG1                              00000001
BRG10                             00000002
BRG11                             00000003
BRG12                             00000004
BRG13                             00000005
BRG14                             00000006
BRG15                             00000007
BRG16                             00000003
BRG2                              00000002
BRG3                              00000003
BRG4                              00000004
BRG5                              00000005
BRG6                              00000006
BRG7                              00000007
BRG8                              00000000
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 11


SYMBOL TABLE
  LABEL                             VALUE 

BRG9                              00000001
BRGH                              00000002
BUCLE_RESTA                       000000D2
C                                 00000000
C1CH0                             00000000
C1CH1                             00000001
C1IE                              00000005
C1IF                              00000005
C1OE                              00000005
C1ON                              00000007
C1OUT                             00000006
C1POL                             00000004
C1R                               00000002
C1RSEL                            00000005
C1SEN                             00000005
C2CH0                             00000000
C2CH1                             00000001
C2IE                              00000006
C2IF                              00000006
C2OE                              00000005
C2ON                              00000007
C2OUT                             00000006
C2POL                             00000004
C2R                               00000002
C2REN                             00000004
C2RSEL                            00000004
C2SYNC                            00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000002
CHS1                              00000003
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 12


SYMBOL TABLE
  LABEL                             VALUE 

CHS2                              00000004
CHS3                              00000005
CKE                               00000006
CKP                               00000004
CM1CON0                           00000107
CM2CON0                           00000108
CM2CON1                           00000109
COL                               00000023
COLMASK                           00000024
CONT0                             00000029
CONT1                             0000002A
CREN                              00000004
CSRC                              00000007
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DIG1                              0000002B
DIGITO_0                          00000026
DIGITO_1                          00000027
D_A                               00000005
D_NOT_A                           00000005
ECCPAS                            0000009C
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDAT                             0000010C
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
ESCANEAR_TECLAS                   0000008E
F                                 00000001
FERR                              00000002
FLAG                              00000025
FOUND_ROW                         000000AF
FSR                               00000004
FVREN                             00000000
GCEN                              00000007
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
GUARDAR_UNIDAD                    000000DA
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 13


SYMBOL TABLE
  LABEL                             VALUE 

HTS                               00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INDF                              00000000
INDICE                            00000022
INGRESAR                          00000020
INICIAR_ADC                       00000057
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOCB                              00000096
IOCB0                             00000000
IOCB1                             00000001
IOCB2                             00000002
IOCB3                             00000003
IOCB4                             00000004
IOCB5                             00000005
IOCB6                             00000006
IOCB7                             00000007
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
ISR                               000000F2
ISR_ADC                           00000122
ISR_RB0                           00000113
ISR_TMR0                          00000102
ISR_TMR1                          00000119
ISR_TRANSMICION                   0000012A
L1                                000000E1
L2                                000000DF
LTS                               00000001
MAIN                              00000005
MAIN_LOOP                         0000004A
MC1OUT                            00000007
MC2OUT                            00000006
MSK                               00000093
MSK0                              00000000
MSK1                              00000001
MSK2                              00000002
MSK3                              00000003
MSK4                              00000004
MSK5                              00000005
MSK6                              00000006
MSK7                              00000007
MUX_DISPLAY_1                     0000010D
NEXT_COL                          000000B7
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OERR                              00000001
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
P                                 00000004
P1M0                              00000006
P1M1                              00000007
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRSEN                             00000007
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PSTRCON                           0000009D
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

PULSR                             00000002
PULSS                             00000003
PWM1CON                           0000009B
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

RETARDO_20ms                      000000DD
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SALIR                             00000139
SBOREN                            00000004
SCAN_COL_LOOP                     00000091
SCAN_ROW_LOOP                     000000A5
SCKP                              00000004
SCS                               00000000
SEN                               00000000
SENDB                             00000003
SMP                               00000007
SPBRG                             00000099
SPBRGH                            0000009A
SPEN                              00000007
SR0                               00000006
SR1                               00000007
SRCON                             00000185
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPMSK                            00000093
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUST                           00000071
STRA                              00000000
STRB                              00000001
STRC                              00000002
STRD                              00000003
STRSYNC                           00000004
SWDTEN                            00000000
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

T1CKPS1                           00000005
T1CON                             00000010
T1GINV                            00000007
T1GIV                             00000007
T1GSS                             00000001
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TABLA_7SEG                        000000E7
TECLADO                           0000005D
TECLADO_PRIMER_DIGITO             0000008A
TECLADO_SEGUNDO_DIGITO            0000007A
TECLAS                            000000C0
TEMPACTUAL                        0000002E
TEMPREF                           00000021
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRISE3                            00000003
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
ULPWUE                            00000005
ULPWUIE                           00000002
ULPWUIF                           00000002
VCFG0                             00000004
VCFG1                             00000005
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             00000097
VREN                              00000007
VROE                              00000006
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

VRR                               00000005
VRSS                              00000004
W                                 00000000
WCOL                              00000007
WDTCON                            00000105
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WPUB                              00000095
WPUB0                             00000000
WPUB1                             00000001
WPUB2                             00000002
WPUB3                             00000003
WPUB4                             00000004
WPUB5                             00000005
WPUB6                             00000006
WPUB7                             00000007
WR                                00000001
WREG_TEMP                         0000002C
WREG_TEMP2                        0000002D
WREN                              00000002
WRERR                             00000003
WTEMP                             00000070
WUE                               00000001
Z                                 00000002
_BOR21V                           00003EFF
_BOR40V                           00003FFF
_BOR4V_BOR21V                     00003EFF
_BOR4V_BOR40V                     00003FFF
_BOREN_NSLEEP                     00003EFF
_BOREN_OFF                        00003CFF
_BOREN_ON                         00003FFF
_BOREN_SBODEN                     00003DFF
_BOR_NSLEEP                       00003EFF
_BOR_OFF                          00003CFF
_BOR_ON                           00003FFF
_BOR_SBODEN                       00003DFF
_CONFIG1                          00002007
_CONFIG2                          00002008
_CPD_OFF                          00003FFF
_CPD_ON                           00003F7F
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         00001FFF
_DEVID1                           00002006
_EC_OSC                           00003FFB
_EXTRC                            00003FFF
_EXTRCIO                          00003FFE
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FCMEN_OFF                        000037FF
MPASM 5.87                        CODIGO.ASM   6-16-2025  18:27:01         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

_FCMEN_ON                         00003FFF
_FOSC_EC                          00003FFB
_FOSC_EXTRC_CLKOUT                00003FFF
_FOSC_EXTRC_NOCLKOUT              00003FFE
_FOSC_HS                          00003FFA
_FOSC_INTRC_CLKOUT                00003FFD
_FOSC_INTRC_NOCLKOUT              00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_HS_OSC                           00003FFA
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_IESO_OFF                         00003BFF
_IESO_ON                          00003FFF
_INTOSC                           00003FFD
_INTOSCIO                         00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_LVP_OFF                          00002FFF
_LVP_ON                           00003FFF
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FF9
__16F887                          00000001

Errors   :     0
Warnings :     1 reported,     0 suppressed
Messages :    14 reported,     0 suppressed

